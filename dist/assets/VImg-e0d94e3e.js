import{p as y,g as J,r as I,ah as K,R as Q,n as w,ai as V,aj as C,s as S,o as Y,c as _,b as g,e as $,h as o,E as Z,a8 as E,M as p,ad as k,ak as ee,al as te,W as j,a7 as ne,$ as re,X as ae}from"./index-3fbee5b5.js";const A=y({class:[String,Array],style:{type:[String,Array,Object],default:null}},"component");function F(e){const a=J("useRender");a.render=e}function ge(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const s=I(),t=I();if(K){const l=new ResizeObserver(n=>{e==null||e(n,l),n.length&&(a==="content"?t.value=n[0].contentRect:t.value=n[0].target.getBoundingClientRect())});Q(()=>{l.disconnect()}),w(s,(n,i)=>{i&&(l.unobserve(V(i)),t.value=void 0),n&&l.observe(V(n))},{flush:"post"})}return{resizeRef:s,contentRect:C(t)}}function fe(){const e=S(!1);return Y(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:_(()=>e.value?void 0:{transition:"none !important"}),isBooted:C(e)}}const he=y({tag:{type:String,default:"div"}},"tag"),Se=(e,a)=>{const s=e.__vccOpts||e;for(const[t,l]of a)s[t]=l;return s};const se=y({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function ie(e){return{dimensionStyles:_(()=>({height:g(e.height),maxHeight:g(e.maxHeight),maxWidth:g(e.maxWidth),minHeight:g(e.minHeight),minWidth:g(e.minWidth),width:g(e.width)}))}}function oe(e){return{aspectStyles:_(()=>{const a=Number(e.aspectRatio);return a?{paddingBottom:String(1/a*100)+"%"}:void 0})}}const M=y({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...A(),...se()},"VResponsive"),H=$()({name:"VResponsive",props:M(),setup(e,a){let{slots:s}=a;const{aspectStyles:t}=oe(e),{dimensionStyles:l}=ie(e);return F(()=>{var n;return o("div",{class:["v-responsive",{"v-responsive--inline":e.inline},e.class],style:[l.value,e.style]},[o("div",{class:"v-responsive__sizer",style:t.value},null),(n=s.additional)==null?void 0:n.call(s),s.default&&o("div",{class:["v-responsive__content",e.contentClass]},[s.default()])])}),{}}}),le=y({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),z=(e,a)=>{let{slots:s}=a;const{transition:t,disabled:l,...n}=e,{component:i=p,...d}=typeof t=="object"?t:{};return Z(i,E(typeof t=="string"?{name:l?"":t}:d,n,{disabled:l}),s)};function ue(e,a){if(!k)return;const s=a.modifiers||{},t=a.value,{handler:l,options:n}=typeof t=="object"?t:{handler:t,options:{}},i=new IntersectionObserver(function(){var h;let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],f=arguments.length>1?arguments[1]:void 0;const u=(h=e._observe)==null?void 0:h[a.instance.$.uid];if(!u)return;const v=d.some(b=>b.isIntersecting);l&&(!s.quiet||u.init)&&(!s.once||v||u.init)&&l(v,d,f),v&&s.once?q(e,a):u.init=!0},n);e._observe=Object(e._observe),e._observe[a.instance.$.uid]={init:!1,observer:i},i.observe(e)}function q(e,a){var t;const s=(t=e._observe)==null?void 0:t[a.instance.$.uid];s&&(s.observer.unobserve(e),delete e._observe[a.instance.$.uid])}const ce={mounted:ue,unmounted:q},de=ce,ve=y({alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,...M(),...A(),...le()},"VImg"),_e=$()({name:"VImg",directives:{intersect:de},props:ve(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,a){let{emit:s,slots:t}=a;const l=S(""),n=I(),i=S(e.eager?"loading":"idle"),d=S(),f=S(),u=_(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),v=_(()=>u.value.aspect||d.value/f.value||0);w(()=>e.src,()=>{h(i.value!=="idle")}),w(v,(r,c)=>{!r&&c&&n.value&&R(n.value)}),ee(()=>h());function h(r){if(!(e.eager&&r)&&!(k&&!r&&!e.eager)){if(i.value="loading",u.value.lazySrc){const c=new Image;c.src=u.value.lazySrc,R(c,null)}u.value.src&&te(()=>{var c,m;if(s("loadstart",((c=n.value)==null?void 0:c.currentSrc)||u.value.src),(m=n.value)!=null&&m.complete){if(n.value.naturalWidth||B(),i.value==="error")return;v.value||R(n.value,null),b()}else v.value||R(n.value),N()})}}function b(){var r;N(),i.value="loaded",s("load",((r=n.value)==null?void 0:r.currentSrc)||u.value.src)}function B(){var r;i.value="error",s("error",((r=n.value)==null?void 0:r.currentSrc)||u.value.src)}function N(){const r=n.value;r&&(l.value=r.currentSrc||r.src)}let W=-1;function R(r){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const m=()=>{clearTimeout(W);const{naturalHeight:x,naturalWidth:T}=r;x||T?(d.value=T,f.value=x):!r.complete&&i.value==="loading"&&c!=null?W=window.setTimeout(m,c):(r.currentSrc.endsWith(".svg")||r.currentSrc.startsWith("data:image/svg+xml"))&&(d.value=1,f.value=1)};m()}const O=_(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),D=()=>{var m;if(!u.value.src||i.value==="idle")return null;const r=o("img",{class:["v-img__img",O.value],src:u.value.src,srcset:u.value.srcset,alt:e.alt,sizes:e.sizes,ref:n,onLoad:b,onError:B},null),c=(m=t.sources)==null?void 0:m.call(t);return o(z,{transition:e.transition,appear:!0},{default:()=>[j(c?o("picture",{class:"v-img__picture"},[c,r]):r,[[ae,i.value==="loaded"]])]})},U=()=>o(z,{transition:e.transition},{default:()=>[u.value.lazySrc&&i.value!=="loaded"&&o("img",{class:["v-img__img","v-img__img--preload",O.value],src:u.value.lazySrc,alt:e.alt},null)]}),L=()=>t.placeholder?o(z,{transition:e.transition,appear:!0},{default:()=>[(i.value==="loading"||i.value==="error"&&!t.error)&&o("div",{class:"v-img__placeholder"},[t.placeholder()])]}):null,X=()=>t.error?o(z,{transition:e.transition,appear:!0},{default:()=>[i.value==="error"&&o("div",{class:"v-img__error"},[t.error()])]}):null,G=()=>e.gradient?o("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,P=S(!1);{const r=w(v,c=>{c&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{P.value=!0})}),r())})}return F(()=>{const[r]=H.filterProps(e);return j(o(H,E({class:["v-img",{"v-img--booting":!P.value},e.class],style:[{width:g(e.width==="auto"?d.value:e.width)},e.style]},r,{aspectRatio:v.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>o(re,null,[o(D,null,null),o(U,null,null),o(G,null,null),o(L,null,null),o(X,null,null)]),default:t.default}),[[ne("intersect"),{handler:h,options:e.options},null,{once:!0}]])}),{currentSrc:l,image:n,state:i,naturalWidth:d,naturalHeight:f}}});export{z as M,_e as V,Se as _,he as a,fe as b,F as c,se as d,ie as e,A as m,ge as u};
